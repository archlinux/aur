From c55bebff0bfbccbf742cac0e5add23e76d1eb7db Mon Sep 17 00:00:00 2001
Message-Id: <c55bebff0bfbccbf742cac0e5add23e76d1eb7db.1679747224.git.matthias@mailaender.name>
In-Reply-To: <89cf140710220a945d6845d413a54c1f5ea6a2d0.1679747224.git.matthias@mailaender.name>
References: <89cf140710220a945d6845d413a54c1f5ea6a2d0.1679747224.git.matthias@mailaender.name>
From: =?UTF-8?q?Matthias=20Mail=C3=A4nder?= <matthias@mailaender.name>
Date: Sat, 25 Mar 2023 13:10:12 +0100
Subject: [PATCH 2/2] Fix the man page.

---
 Makefile | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

diff --git a/Makefile b/Makefile
index d59452c8..5717d2c3 100644
--- a/Makefile
+++ b/Makefile
@@ -151,7 +151,7 @@ else
 	@find . -maxdepth 1 -name '*.sln' -exec $(DOTNET) build -c Release -p:TargetPlatform=$(TARGETPLATFORM) \;
 endif
 
-install: install-assemblies install-executables install-metadata install-data
+install: install-assemblies install-executables install-metadata install-data install-man
 
 install-assemblies:
 	@mkdir -p $(DESTDIR)$(gamedir)
@@ -171,9 +171,15 @@ install-metadata:
 install-data:
 	@sh -c '. ./packaging/functions.sh; install_data ./engine $(DESTDIR)$(gamedir)'
 
-install-man: engine
+install-man:
 	@mkdir -p $(DESTDIR)$(mandir)/man6/
-	@./utility.sh all --man-page > $(DESTDIR)$(mandir)/man6/openhv.6
+	@./utility.sh --man-page > $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i 's/An Open Source modernization of the early 2D Command \& Conquer games./An Open Source Pixelart Science-Fiction Real-Time-Strategy game/' $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i 's#http://bugs.openra.net#https://github.com/OpenHV/OpenHV/issues#g' $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i 's/OPENRA/OPENHV/g' $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i 's/OpenRA/OpenHV/g' $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i 's/openra/openhv/g' $(DESTDIR)$(mandir)/man6/openhv.6
+	@sed -i '/Game\.Mod/d' $(DESTDIR)$(mandir)/man6/openhv.6
 
 clean: engine
 ifneq ("$(MOD_SOLUTION_FILES)","")
-- 
2.40.0

