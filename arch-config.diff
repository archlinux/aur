diff -up src/xrdp/instfiles/xrdp.service.in.orig src/xrdp/instfiles/xrdp.service.in
--- src/xrdp/instfiles/xrdp.service.in.orig	2020-06-26 05:13:58.000000000 -0600
+++ src/xrdp/instfiles/xrdp.service.in	2021-05-12 17:06:31.680000000 -0600
@@ -6,9 +6,7 @@ After=network.target xrdp-sesman.service

 [Service]
 Type=exec
-EnvironmentFile=-@sysconfdir@/sysconfig/xrdp
-EnvironmentFile=-@sysconfdir@/default/xrdp
-ExecStart=@sbindir@/xrdp $XRDP_OPTIONS --nodaemon
+ExecStart=@sbindir@/xrdp --nodaemon
 SystemCallArchitectures=native
 SystemCallFilter=@basic-io @file-system @io-event @ipc @network-io @process @signal ioctl madvise sysinfo uname

diff -up src/xrdp/instfiles/xrdp-sesman.service.in.orig src/xrdp/instfiles/xrdp-sesman.service.in
--- src/xrdp/instfiles/xrdp-sesman.service.in.orig	2020-06-26 05:13:58.000000000 -0600
+++ src/xrdp/instfiles/xrdp-sesman.service.in	2021-05-12 17:06:31.690000000 -0600
@@ -7,10 +7,8 @@ BindsTo=xrdp.service

 [Service]
 Type=exec
-EnvironmentFile=-@sysconfdir@/sysconfig/xrdp
-EnvironmentFile=-@sysconfdir@/default/xrdp
-ExecStart=@sbindir@/xrdp-sesman $SESMAN_OPTIONS --nodaemon
+ExecStart=@sbindir@/xrdp-sesman --nodaemon
 ExecReload=kill -HUP $MAINPID

 [Install]
 WantedBy=multi-user.target
diff -up src/xrdp/sesman/startwm.sh.orig src/xrdp/sesman/startwm.sh
--- src/xrdp/sesman/startwm.sh.orig	2020-12-28 07:03:43.000000000 -0700
+++ src/xrdp/sesman/startwm.sh	2021-05-12 17:06:31.690000000 -0600
@@ -75,11 +75,26 @@ get_xdg_session_startupcmd()
 #start the window manager
 wm_start()
 {
-  if [ -r /etc/default/locale ]; then
-    . /etc/default/locale
+  if [ -r /etc/locale.conf ]; then
+    . /etc/locale.conf
     export LANG LANGUAGE
   fi

+  # arch user
+  if [ -r ~/.xinitrc ]; then
+    pre_start
+    . ~/.xinitrc
+    post_start
+    exit 0
+  fi
+  # arch
+  if [ -r /etc/X11/xinit/xinitrc ]; then
+    pre_start
+    . /etc/X11/xinit/xinitrc
+    post_start
+    exit 0
+  fi
+
   # debian
   if [ -r /etc/X11/Xsession ]; then
     pre_start
