--- pidgin/gtkconv.c	2021-09-17 05:24:24.000000000 +0200
+++ pidgin/gtkconv.c	2021-12-18 07:22:01.683126381 +0100
@@ -5081,10 +5081,12 @@
 		gtkconv->u.im->show_icon = TRUE;
 	}
 
-	g_signal_connect_swapped(G_OBJECT(gtkconv->entry_buffer), "changed",
-				 G_CALLBACK(resize_imhtml_cb), gtkconv);
-	g_signal_connect_swapped(G_OBJECT(gtkconv->entry), "size-allocate",
-				 G_CALLBACK(resize_imhtml_cb), gtkconv);
+	// g_signal_connect_swapped(G_OBJECT(gtkconv->entry_buffer), "changed",
+	// 			 G_CALLBACK(resize_imhtml_cb), gtkconv);
+	// g_signal_connect_swapped(G_OBJECT(gtkconv->entry), "size-allocate",
+	// 			 G_CALLBACK(resize_imhtml_cb), gtkconv);
+	g_signal_connect_swapped(G_OBJECT(gtkconv->entry), "realize",
+		G_CALLBACK(resize_imhtml_cb), gtkconv);
 
 	default_formatize(gtkconv);
 	g_signal_connect_after(G_OBJECT(gtkconv->entry), "format_function_clear",
