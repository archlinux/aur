--- a/meson.build	2024-02-11 15:24:28.360885940 -0300
+++ b/meson.build	2024-02-11 15:35:47.106338627 -0300
@@ -394,6 +394,13 @@
   config.set('PIXMAN_GNUPLOT', 1)
 endif
 
+res = run_command('python3', '-c', 'import os; print(os.environ["LIBRARY_PATH"])')
+library_path = []
+
+if res.returncode() == 0
+  library_path = res.stdout().strip().split(':')
+endif
+
 if cc.get_id() != 'msvc'
   dep_openmp = dependency('openmp', required : get_option('openmp'))
   if dep_openmp.found()
@@ -417,13 +424,13 @@
 
 dep_png = null_dep
 if not get_option('libpng').disabled()
-  dep_png = dependency('libpng', required : false)
+  dep_png = cc.find_library('png', required: false, dirs: library_path)
 
   # We need to look for the right library to link to for libpng,
   # when looking for libpng manually
   foreach png_ver : [ '16', '15', '14', '13', '12', '10' ]
     if not dep_png.found()
-      dep_png = cc.find_library('libpng@0@'.format(png_ver), has_headers : ['png.h'], required : false)
+      dep_png = cc.find_library('libpng@0@'.format(png_ver), has_headers : ['png.h'], required: false, dirs: library_path)
     endif
   endforeach
 
