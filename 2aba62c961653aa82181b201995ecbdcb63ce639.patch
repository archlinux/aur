diff --git a/common/devpi_common/metadata.py b/common/devpi_common/metadata.py
index 712f77e4e..f72567fa1 100644
--- a/common/devpi_common/metadata.py
+++ b/common/devpi_common/metadata.py
@@ -1,7 +1,9 @@
 import posixpath
 import re
-from packaging.version import parse as parse_version
 from packaging.requirements import Requirement as BaseRequirement
+from packaging.version import InvalidVersion
+from packaging.version import Version as PackagingVersion
+from packaging.version import parse as orig_parse_version
 from .types import CompareMixin
 from .types import cached_property
 from .validation import normalize_name
@@ -12,6 +14,72 @@
     ".tar.bz2 .tar .tgz .zip .doc.zip".split())
 
 
+class LegacyVersion(object):
+    # "naturally" sorted and always smaller than a valid version
+    __slots__ = ('_value', 'cmpval')
+
+    def __init__(self, version):
+        self._value = version
+        self.cmpval = tuple(
+            (int(n) if n != '' else 0, a)
+            for n, a in re.findall(r'(\d*)([^\d]*)', version))
+
+    def __lt__(self, other):
+        if isinstance(other, PackagingVersion):
+            # always smaller
+            return True
+        if isinstance(other, LegacyVersion):
+            return self.cmpval < other.cmpval
+        return NotImplemented
+
+    def __le__(self, other):
+        if isinstance(other, PackagingVersion):
+            # always smaller or equal
+            return True
+        if isinstance(other, LegacyVersion):
+            return self.cmpval <= other.cmpval
+        return NotImplemented
+
+    def __eq__(self, other):
+        if isinstance(other, PackagingVersion):
+            # never equal
+            return False
+        if isinstance(other, LegacyVersion):
+            return self.cmpval == other.cmpval
+        return NotImplemented
+
+    def __ne__(self, other):
+        if isinstance(other, PackagingVersion):
+            # never equal
+            return True
+        if isinstance(other, LegacyVersion):
+            return self.cmpval != other.cmpval
+        return NotImplemented
+
+    def __ge__(self, other):
+        if isinstance(other, PackagingVersion):
+            # never greater or equal
+            return False
+        if isinstance(other, LegacyVersion):
+            return self.cmpval >= other.cmpval
+        return NotImplemented
+
+    def __gt__(self, other):
+        if isinstance(other, PackagingVersion):
+            # never greater
+            return False
+        if isinstance(other, LegacyVersion):
+            return self.cmpval > other.cmpval
+        return NotImplemented
+
+
+def parse_version(version):
+    try:
+        return orig_parse_version(version)
+    except InvalidVersion:
+        return LegacyVersion(version)
+
+
 _releasefile_suffix_rx = re.compile(
     r"(\.deb|\.dmg|\.msi|\.zip|\.tar\.gz|\.tgz|\.tar\.bz2|"
     r"\.doc\.zip|"
