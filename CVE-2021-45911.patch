--- a/gif2apng.cpp
+++ b/gif2apng.cpp
@@ -1054,7 +1054,9 @@ int main(int argc, char** argv)
             dispose_op = (flags >> 2) & 7;
             if (dispose_op > 3) dispose_op = 3;
             if (dispose_op == 3 && n == 0) dispose_op = 2;
-            if (delay > 1) delays[n] = delay;
+            if (delay > 1 && n < frames) {
+              if (delay > 1) delays[n] = delay;
+            }
           }
           else
           {
