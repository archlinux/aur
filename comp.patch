--- comp.orig	2023-10-03 09:37:23.000000000 +0300
+++ comp	2024-01-22 20:09:48.995914562 +0200
@@ -2081,7 +2081,7 @@
          #
          set OPT='-O2'
          #
-         set EXTRAOPT=" "
+         set EXTRAOPT=" -march=native -std=legacy"
          #
          if (($MODULE_F:e == f90) || ($MODULE_F:e == F90)) then
             set EXTRAOPT="$EXTRAOPT -ffree-line-length-none"
@@ -2232,7 +2232,7 @@
               #if ($MODULE =~ deaeom3* ) set EXTRAOPT="$EXTRAOPT --param=max-vartrack-size=500000000"  #--for debugging
               #if ($MODULE =~ eomdip3a* ) set EXTRAOPT="$EXTRAOPT --param=max-vartrack-size=500000000"  #--for debugging
                if ($MODULE == cimi ) set EXTRAOPT="$EXTRAOPT -fno-var-tracking-assignments -Wno-maybe-uninitialized"
-               set EXTRAOPT="$EXTRAOPT -fno-aggressive-loop-optimizations -funconstrained-commons"
+               set EXTRAOPT="$EXTRAOPT -funconstrained-commons"
                set EXTRAOPT="$EXTRAOPT -Werror=align-commons -Wtabs -Wuninitialized"
                if (! -d $GMS_PATH/.git) set EXTRAOPT="$EXTRAOPT -Wno-maybe-uninitialized"
                breaksw
@@ -2294,9 +2294,9 @@
          # ARM64 ThunderX2
          if (`uname -p` == aarch64) set EXTRAOPT="-mcpu=native $EXTRAOPT"
          #
-         set EXTRAOPT="-mcmodel=medium $EXTRAOPT"
+         set EXTRAOPT="-mcmodel=small $EXTRAOPT"
          #
-         (set echo; gfortran -c -fdefault-integer-8 -g $GMS_FPE_FLAGS $OPT $EXTRAOPT $MODULE_F)
+         (set echo; gfortran -c -I/usr/include -fdefault-integer-8 -g $GMS_FPE_FLAGS $OPT $EXTRAOPT $MODULE_F)
          breaksw
 
       case armflang:
