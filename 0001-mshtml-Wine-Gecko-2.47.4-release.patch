From 10d6e719ff498ca4b22824782790b13cde13c022 Mon Sep 17 00:00:00 2001
From: Jacek Caban <jacek@codeweavers.com>
Date: Mon, 3 Apr 2023 16:55:12 +0200
Subject: [PATCH] mshtml: Wine Gecko 2.47.4 release.

---
 dlls/appwiz.cpl/addons.c | 6 +++---
 dlls/mshtml/nsiface.idl  | 7 ++++++-
 tools/gitlab/test.yml    | 2 +-
 3 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/dlls/appwiz.cpl/addons.c b/dlls/appwiz.cpl/addons.c
index c63106de95b..ed7b5f0797e 100644
--- a/dlls/appwiz.cpl/addons.c
+++ b/dlls/appwiz.cpl/addons.c
@@ -46,13 +46,13 @@
 
 WINE_DEFAULT_DEBUG_CHANNEL(appwizcpl);
 
-#define GECKO_VERSION "2.47.3"
+#define GECKO_VERSION "2.47.4"
 #ifdef __i386__
 #define GECKO_ARCH "x86"
-#define GECKO_SHA "e5b9b06d3ce355646a8d2e72e044e37e1e0c8d18464eb1985adcd187a7f48e01"
+#define GECKO_SHA "26cecc47706b091908f7f814bddb074c61beb8063318e9efc5a7f789857793d6"
 #elif defined(__x86_64__)
 #define GECKO_ARCH "x86_64"
-#define GECKO_SHA "a53ee954392b6d1fe3d68545f6e4e2a97afbc8dc8b03a8b443349545ce139675"
+#define GECKO_SHA "e590b7d988a32d6aa4cf1d8aa3aa3d33766fdd4cf4c89c2dcc2095ecb28d066f"
 #else
 #define GECKO_ARCH ""
 #define GECKO_SHA "???"
diff --git a/dlls/mshtml/nsiface.idl b/dlls/mshtml/nsiface.idl
index 1e97f1fc63b..8ad5e871e21 100644
--- a/dlls/mshtml/nsiface.idl
+++ b/dlls/mshtml/nsiface.idl
@@ -25,7 +25,7 @@
 
 #pragma makedep header
 
-cpp_quote("#define GECKO_VERSION \"2.47.3\"")
+cpp_quote("#define GECKO_VERSION \"2.47.4\"")
 cpp_quote("#define GECKO_VERSION_STRING \"Wine Gecko \" GECKO_VERSION")
 
 import "wtypes.idl";
@@ -114,6 +114,7 @@ interface nsIDOMHTMLSelectElement;
 interface nsIFile;
 interface nsIDocShell;
 interface mozIDOMWindowProxy;
+interface nsIDOMMediaQueryListListener;
 
 interface IMoniker;
 
@@ -919,6 +920,7 @@ interface nsIDOMMediaQueryList : nsISupports
 {
     nsresult GetMedia(nsAString *aMedia);
     nsresult GetMatches(bool *_retval);
+    nsresult SetListener(nsIDOMMediaQueryListListener *listener);
 }
 
 [
@@ -1445,6 +1447,8 @@ interface nsIDOMHTMLDocument : nsIDOMDocument
     nsresult GetSelection(nsISelection **_retval);
     nsresult CaptureEvents();
     nsresult ReleaseEvents();
+    nsresult GetIECompatMode(uint32_t *aIECompatMode);
+    nsresult SetIECompatMode(uint32_t aIECompatMode);
 }
 
 [
@@ -1777,6 +1781,7 @@ interface nsIDOMHTMLInputElement : nsISupports
     nsresult MozGetFileNameArray(uint32_t *aLength, PRUnichar ***aFileNames);
     nsresult MozSetFileNameArray(const PRUnichar **aFileNames, uint32_t aLength);
     nsresult MozIsTextField(bool aExcludePassword, bool *_retval);
+    nsresult GetComplete(bool *aComplete);
 }
 
 [
diff --git a/tools/gitlab/test.yml b/tools/gitlab/test.yml
index da34390bc1f..848559ae8c2 100644
--- a/tools/gitlab/test.yml
+++ b/tools/gitlab/test.yml
@@ -6,7 +6,7 @@
   interruptible: true
   variables:
     GIT_STRATEGY: none
-    GECKO_VER: 2.47.3
+    GECKO_VER: 2.47.4
     MONO_VER: 7.4.0
   cache:
     - key: wine-gecko-$GECKO_VER
-- 
2.41.0

