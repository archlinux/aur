From ce52d6ac5e5ed7119a0028eed8823117a004766e Mon Sep 17 00:00:00 2001
From: Will Fancher <elvishjerricco@gmail.com>
Date: Tue, 27 Dec 2022 16:33:07 -0500
Subject: [PATCH] Fix for 6.1

---
 ddcci/ddcci.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/ddcci/ddcci.c b/ddcci/ddcci.c
index 586b6e2..77fee6e 100644
--- a/ddcci/ddcci.c
+++ b/ddcci/ddcci.c
@@ -1785,6 +1785,13 @@ static int ddcci_remove(struct i2c_client *client)
 	return 0;
 }
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 0)
+static void ddcci_remove_void(struct i2c_client *client)
+{
+	ddcci_remove(client);
+}
+#endif
+
 /*
  * I2C driver device identification table.
  */
@@ -1806,7 +1813,11 @@ static struct i2c_driver ddcci_driver = {
 
 	.id_table	= ddcci_idtable,
 	.probe		= ddcci_probe,
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 0)
+	.remove		= ddcci_remove_void,
+#else
 	.remove		= ddcci_remove,
+#endif
 	.class		= I2C_CLASS_DDC,
 	.detect		= ddcci_detect,
 	.address_list	= I2C_ADDRS(
-- 
GitLab

