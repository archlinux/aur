From 5a9247d3eb92cd18be0991de6dbd5298a4764fef Mon Sep 17 00:00:00 2001
From: ArenM <aren@peacevolution.org>
Date: Sat, 18 Feb 2023 15:13:53 -0500
Subject: [PATCH sxmo-utils 3/6] Add PartOf to services so they stop when the
 graphical session ends

---
 configs/services/autocutsel-primary.service       | 1 +
 configs/services/autocutsel.service               | 1 +
 configs/services/bonsaid.service                  | 1 +
 configs/services/sxmo-x11-status.service          | 1 +
 configs/services/sxmo_autosuspend.service         | 1 +
 configs/services/sxmo_battery_monitor.service     | 1 +
 configs/services/sxmo_conky.service               | 1 +
 configs/services/sxmo_desktop_widget.service      | 1 +
 configs/services/sxmo_hook_lisgd.service          | 1 +
 configs/services/sxmo_menumode_toggler.service    | 1 +
 configs/services/sxmo_modemmonitor.service        | 1 +
 configs/services/sxmo_networkmonitor.service      | 1 +
 configs/services/sxmo_notificationmonitor.service | 1 +
 configs/services/sxmo_soundmonitor.service        | 1 +
 configs/services/sxmo_wob.service                 | 1 +
 configs/services/unclutter-xfixes.service         | 1 +
 configs/services/unclutter.service                | 1 +
 17 files changed, 17 insertions(+)

diff --git a/configs/services/autocutsel-primary.service b/configs/services/autocutsel-primary.service
index 9574e09..3a65320 100644
--- a/configs/services/autocutsel-primary.service
+++ b/configs/services/autocutsel-primary.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=automated xcutsel
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/autocutsel.service b/configs/services/autocutsel.service
index c97dc64..99223ad 100644
--- a/configs/services/autocutsel.service
+++ b/configs/services/autocutsel.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=automated xcutsel
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/bonsaid.service b/configs/services/bonsaid.service
index f17fa1a..52c2823 100644
--- a/configs/services/bonsaid.service
+++ b/configs/services/bonsaid.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Bonsai daemon
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo-x11-status.service b/configs/services/sxmo-x11-status.service
index f27a613..a263e21 100644
--- a/configs/services/sxmo-x11-status.service
+++ b/configs/services/sxmo-x11-status.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=periodically set the status bar content
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_autosuspend.service b/configs/services/sxmo_autosuspend.service
index 86ce1bc..c32bed7 100644
--- a/configs/services/sxmo_autosuspend.service
+++ b/configs/services/sxmo_autosuspend.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=daemon for autosuspending
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_battery_monitor.service b/configs/services/sxmo_battery_monitor.service
index 1918ba5..621733f 100644
--- a/configs/services/sxmo_battery_monitor.service
+++ b/configs/services/sxmo_battery_monitor.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Sxmo: monitors the battery
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_conky.service b/configs/services/sxmo_conky.service
index de8b83e..a4fca14 100644
--- a/configs/services/sxmo_conky.service
+++ b/configs/services/sxmo_conky.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Conky
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_desktop_widget.service b/configs/services/sxmo_desktop_widget.service
index 199d9a6..aca4df0 100644
--- a/configs/services/sxmo_desktop_widget.service
+++ b/configs/services/sxmo_desktop_widget.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Sxmo: start desktop widget (ie. clock)
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_hook_lisgd.service b/configs/services/sxmo_hook_lisgd.service
index c671235..3fcff2b 100644
--- a/configs/services/sxmo_hook_lisgd.service
+++ b/configs/services/sxmo_hook_lisgd.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=run user defined lisgd start hook
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_menumode_toggler.service b/configs/services/sxmo_menumode_toggler.service
index d6c949e..8a6d339 100644
--- a/configs/services/sxmo_menumode_toggler.service
+++ b/configs/services/sxmo_menumode_toggler.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Sxmo: sets menu buttons for sway
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_modemmonitor.service b/configs/services/sxmo_modemmonitor.service
index 53171ef..b80c05d 100644
--- a/configs/services/sxmo_modemmonitor.service
+++ b/configs/services/sxmo_modemmonitor.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=daemon for monitoring modem-related dbuses (calls, sms, mms, etc.)
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_networkmonitor.service b/configs/services/sxmo_networkmonitor.service
index cc30f48..80c33e5 100644
--- a/configs/services/sxmo_networkmonitor.service
+++ b/configs/services/sxmo_networkmonitor.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Sxmo: watch network changes and update the status bar
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_notificationmonitor.service b/configs/services/sxmo_notificationmonitor.service
index 4d6033a..52dcca7 100644
--- a/configs/services/sxmo_notificationmonitor.service
+++ b/configs/services/sxmo_notificationmonitor.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=display notifications popup messages
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_soundmonitor.service b/configs/services/sxmo_soundmonitor.service
index 1f759f3..04c0d3a 100644
--- a/configs/services/sxmo_soundmonitor.service
+++ b/configs/services/sxmo_soundmonitor.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Sxmo: watch audio changes and update the status bar
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/sxmo_wob.service b/configs/services/sxmo_wob.service
index 600646f..5bacf13 100644
--- a/configs/services/sxmo_wob.service
+++ b/configs/services/sxmo_wob.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=A lightweight overlay volume/backlight/progress/anything bar for Wayland
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/unclutter-xfixes.service b/configs/services/unclutter-xfixes.service
index 3125786..66746b4 100644
--- a/configs/services/unclutter-xfixes.service
+++ b/configs/services/unclutter-xfixes.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Hides mouse pointer while not in use
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
diff --git a/configs/services/unclutter.service b/configs/services/unclutter.service
index f987ac3..0f5d2f6 100644
--- a/configs/services/unclutter.service
+++ b/configs/services/unclutter.service
@@ -1,5 +1,6 @@
 [Unit]
 Description=Hides mouse pointer while not in use
+PartOf=graphical-session.target
 
 [Service]
 Type=simple
-- 
2.43.0

