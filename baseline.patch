Description: respect the CPU baseline.
 FIXME: implement multiple executables using SIMDe as distributed by Debian.
Author: Ã‰tienne Mollier <emollier@debian.org>
Forwarded: not-needed
Last-Update: 2022-07-09
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- abpoa.orig/CMakeLists.txt
+++ abpoa/CMakeLists.txt
@@ -10,7 +10,7 @@
 
 set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall")
 
-set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -march=native") # SIMD
+#set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -march=native") # SIMD
 
 # build abPOA as a static library by default
 set(BUILD_SHARED_LIBS OFF CACHE BOOL "Build all libraries as shared")
--- abpoa.orig/Makefile
+++ abpoa/Makefile
@@ -2,19 +2,19 @@
 EXTRA_FLAGS = -Wno-unused-function -Wno-misleading-indentation -DUSE_SIMDE -DSIMDE_ENABLE_NATIVE_ALIASES
 CFLAGS      += $(CPPFLAGS) -Wall -O3 $(EXTRA_FLAGS) $(LDFLAGS)
 
-SIMD_FLAG   = -march=native
+#SIMD_FLAG   = -march=native
 
-ifneq ($(armv7),) # for ARMv7
-	SIMD_FLAG   =  -march=armv7-a -mfpu=neon -D__AVX2__
-else
-ifneq ($(armv8),) # for ARMv8
-ifneq ($(aarch64),) # for Aarch64 
-	SIMD_FLAG   =  -march=armv8-a+simd -D__AVX2__
-else # for Aarch32
-	SIMD_FLAG   =  -march=armv8-a+simd -mfpu=auto -D__AVX2__
-endif
-endif
-endif
+#ifneq ($(armv7),) # for ARMv7
+#	SIMD_FLAG   =  -march=armv7-a -mfpu=neon -D__AVX2__
+#else
+#ifneq ($(armv8),) # for ARMv8
+#ifneq ($(aarch64),) # for Aarch64 
+#	SIMD_FLAG   =  -march=armv8-a+simd -D__AVX2__
+#else # for Aarch32
+#	SIMD_FLAG   =  -march=armv8-a+simd -mfpu=auto -D__AVX2__
+#endif
+#endif
+#endif
 
 # for debug
 ifneq ($(debug),)

