post_install() {
    python3 -m compileall /opt/keyboard-center

    # force load uinput kernel module
    modprobe uinput

    # force reload udev rules
    udevadm control --reload-rules
    udevadm trigger
}

post_upgrade() {
    udevadm control --reload-rules
}

pre_remove() {
    find /opt/keyboard-center -type f -iname \*.pyc -delete
    find /opt/keyboard-center -type d -iname __pycache__ -delete
}

post_remove() {
    udevadm control --reload-rules
}
