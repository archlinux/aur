#!/bin/sh

if [[ "$1" != "-p" ]]; then
    WORKDIR=${XDG_CONFIG_HOME:-$HOME/.config}/hmcl
    mkdir -p $WORKDIR
    cd $WORKDIR
fi

JAVA_HOME=/usr/lib/jvm/$(pacman -Ql java-openjfx | grep javafx | head -n 1 | cut -d / -f 5)

if [ -n "$(pacman -Ql java-openjfx | grep javafx | head -n 1 | cut -d / -f 5)" ]; then

exec java --module-path "${JAVA_HOME}/lib/javafx.base.jar:${JAVA_HOME}/lib/javafx.fxml.jar:${JAVA_HOME}/lib/javafx.graphics.jar:${JAVA_HOME}/lib/javafx.media.jar:${JAVA_HOM>

else

exec java -jar /usr/share/java/hmcl-bin/hmcl-stable-bin.jar "$@"

fi
