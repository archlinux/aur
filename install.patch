From f5eee9cfe55b266d1ccd79b01eb0381c05e8d4a5 Mon Sep 17 00:00:00 2001
Message-Id: <f5eee9cfe55b266d1ccd79b01eb0381c05e8d4a5.1679747325.git.matthias@mailaender.name>
From: =?UTF-8?q?Matthias=20Mail=C3=A4nder?= <matthias@mailaender.name>
Date: Sat, 25 Mar 2023 12:54:27 +0100
Subject: [PATCH] Simplify install rules.

---
 Makefile | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/Makefile b/Makefile
index f011bb8c..1b64e749 100644
--- a/Makefile
+++ b/Makefile
@@ -154,8 +154,13 @@ endif
 install: install-assemblies install-executables install-metadata install-data
 
 install-assemblies:
-	@sh -c '. ./packaging/functions.sh; install_mod_assemblies . $(DESTDIR)$(gamedir) $(TARGETPLATFORM) $(RUNTIME) ./engine'
-	@sh -c '. ./engine/packaging/functions.sh; install_assemblies ./engine $(DESTDIR)$(gamedir) $(TARGETPLATFORM) $(RUNTIME) True False False'
+	@mkdir -p $(DESTDIR)$(gamedir)
+	@cp -r engine/bin/* $(DESTDIR)$(gamedir)
+	@rm $(DESTDIR)$(gamedir)/OpenRA.Mods.Cnc.dll
+	@rm $(DESTDIR)$(gamedir)/OpenRA.Mods.D2k.dll
+ifeq ("$(TARGETPLATFORM)","unix-generic")
+	@rm $(DESTDIR)$(gamedir)/*.so
+endif
 
 install-executables:
 	@sh -c '. ./packaging/linux/functions.sh; install_executables $(DESTDIR)$(bindir) . ./engine hv $(VERSION) OpenHV OpenHV https://github.com/OpenHV/OpenHV/wiki/FAQ'
-- 
2.40.0

