From 30aa0c3f4873a92c5e3da8ba8cf030de56bf4cf7 Mon Sep 17 00:00:00 2001
From: Zhao Zhili <zhilizhao@tencent.com>
Date: Wed, 27 Jul 2022 00:32:51 +0800
Subject: [PATCH] avdevice/v4l2: fix leak of timefilter

Fixes ticket #9844.

Signed-off-by: Zhao Zhili <zhilizhao@tencent.com>
---
 libavdevice/v4l2.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/libavdevice/v4l2.c b/libavdevice/v4l2.c
index 5340382d57..be422d7c8c 100644
--- a/libavdevice/v4l2.c
+++ b/libavdevice/v4l2.c
@@ -1011,6 +1011,7 @@ static int v4l2_read_close(AVFormatContext *ctx)
 
     mmap_close(s);
 
+    ff_timefilter_destroy(s->timefilter);
     v4l2_close(s->fd);
     return 0;
 }
-- 
2.25.1

