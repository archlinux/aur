From 8100b5940ca5bad8438bc0b7c9ea1d2a9b171c0a Mon Sep 17 00:00:00 2001
From: Mole Shang <135e2@135e2.dev>
Date: Sat, 11 Nov 2023 00:26:56 +0800
Subject: [PATCH] disable unneeded imgui demo window

This commit disables the demo window in ImPlay to eliminate a warning
produced by makepkg on Arch Linux:

==> WARNING: Package contains reference to $srcdir
usr/bin/ImPlay

After investigating for quite a while, a reference to
third_party/imgui/imgui_debug.cpp was found to be the cause:

strings pkg/implay/usr/bin/ImPlay | grep -F src
src/implay/third_party/imgui/source/imgui_demo.cpp

To address the issue, this commit uses the IMGUI_DISABLE_DEMO_WINDOWS
macro to suppress demo calls, which are mostly not needed by end users
like us on arch.
---
 third_party/imgui/include/imconfig.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/third_party/imgui/include/imconfig.h b/third_party/imgui/include/imconfig.h
index 864c1b3..9face23 100644
--- a/third_party/imgui/include/imconfig.h
+++ b/third_party/imgui/include/imconfig.h
@@ -33,7 +33,7 @@
 //---- Disable all of Dear ImGui or don't implement standard windows/tools.
 // It is very strongly recommended to NOT disable the demo windows and debug tool during development. They are extremely useful in day to day work. Please read comments in imgui_demo.cpp.
 //#define IMGUI_DISABLE                                     // Disable everything: all headers and source files will be empty.
-//#define IMGUI_DISABLE_DEMO_WINDOWS                        // Disable demo windows: ShowDemoWindow()/ShowStyleEditor() will be empty.
+#define IMGUI_DISABLE_DEMO_WINDOWS                        // Disable demo windows: ShowDemoWindow()/ShowStyleEditor() will be empty.
 //#define IMGUI_DISABLE_DEBUG_TOOLS                         // Disable metrics/debugger and other debug tools: ShowMetricsWindow(), ShowDebugLogWindow() and ShowIDStackToolWindow() will be empty.
 
 //---- Don't implement some functions to reduce linkage requirements.
-- 
2.42.1

