# Maintainer: Guillaume Boehm <guillaumeboehm@hotmail.fr>
_gitname='wal-telegram'
pkgname="${_gitname}-git"
pkgver=r34.47e1a18
pkgrel=1
pkgdesc="A bash script that generates themes for Telegram based on an arbitrary 16-colors palette or by sourcing the colors generated by pywal/wal."
arch=('any')
url="https://github.com/guillaumeboehm/${_gitname}"
license=('MIT')
depends=('coreutils' 'sed' 'imagemagick' 'zip')
makedepends=('git')
source=("${_gitname}::git+${url}.git")
provides=("${_gitname}")
conflicts=("${_gitname}")
md5sums=('SKIP')

pkgver() {
        cd "$srcdir/${_gitname}"
        printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
        cd "$srcdir/${_gitname}"
        install -Dm644 ./LICENSE "$pkgdir/usr/share/licenses/${pkgname}/LICENSE"
        install -Dm755 ./wal-telegram "$pkgdir/usr/share/${_gitname}/wal-telegram"
        install -Dm644 ./colors.wt-constants "$pkgdir/usr/share/${_gitname}/colors.wt-constants"
        rm -f ./shortcut
        echo "/bin/sh -c \"/usr/share/${_gitname}/wal-telegram \$*\"" >> ./shortcut
        install -Dm755 ./shortcut "$pkgdir/usr/bin/wal-telegram"
}
