# Maintainer: Anarcoco <archlinux.dn4qx@slmail.me>
pkgname=sudo-rs-git
pkgver=2023.04.30.fe8bf15
pkgrel=1
pkgdesc="A memory safe implementation of sudo and su. "
arch=('any')
url="https://github.com/memorysafety/sudo-rs"
license=('Apache 2.0', 'MIT')
builddepends=('rust', 'cargo', 'clang')
provides=(sudo-rs) # Will replace with "sudo" when sudo-rs becomes stable.
_commit=fe8bf15a238cc48c4518fe9d5ec593fdef89d863
source=("source.zip"::"https://github.com/memorysafety/sudo-rs/archive/$_commit.zip")
install=warning.install
sha512sums=('3d4df0749079f53e43af9b654e9d200aff8ea2d9e00d86cdd17ce2537201a5ced27799a51e17174fa3445e6738f8c7856d0b303ad2ecfd27188d18a17fd04a7b') # Generated by me.
build() {
	cd $srcdir/sudo-rs-$_commit
	cargo build --release
}
package() {
	cd $srcdir/sudo-rs-$_commit
	install -Dm644 LICENSE-MIT "$pkgdir/usr/share/licenses/sudo-rs/LICENSE-MIT"
	install -Dm644 LICENSE-MIT "$pkgdir/usr/share/licenses/sudo-rs/LICENSE-MIT"
	install -Dm4755 target/release/sudo "$pkgdir/usr/bin/sudo-rs" # Will replace with "sudo" when sudo-rs becomes stable.
}
