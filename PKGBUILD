# Generated by debtap
# Maintainer: TheK0tYaRa
###
#	${_my_pkg}_2.3.0_amd64.deb
###
_my_pkg=myoffice-standard-home-edition
pkgname=${_my_pkg}-bin
# The version shouldn't matter as it always installs latest. Except when the install script from debtap needs a version change.
pkgver=2.3.0
pkgrel=1
pkgdesc="A set of office applications for creating text and spreadsheet documents. Home edition."
arch=('x86_64')
url="https://myoffice.ru/products/standard-home-edition/"
license=('EULA')
groups=('myoffice')
depends=('fontconfig' 'freetype2' 'glib2' 'hunspell' 'krb5' 'libcups' 'libglvnd' 'libpng' 'libpulse'
	'libx11' 'libxcb' 'libxext' 'libxkbcommon' 'libxkbcommon-x11' 'libxrender' 'link-grammar' 'lua'
	'mono' 'openssl-1.1' 'pcre2' 'pixman' 'qt5-base' 'qt5-multimedia' 'qt5-svg' 'zlib' 'bc')
options=('!strip' '!emptydirs')
install=${pkgname}.install

source_x86_64=("$( echo $( curl -s 'https://myoffice.ru/products/standard-home-edition/' | grep '_amd64.deb' | sed 's/.\+<a href=\"\|\" .\+//g' ) | cut -d ' ' -f 1 )")
sha512sums_x86_64=('5535337e271e70c5f1acc06d309232e16da105b6a8e37192ed72803dd5608b048ff8e13528cf5ae8efb2c8c919db1143841cf72dc12a46e300685b5cb4ba6c8e')

package(){
	# Extract package data
	tar xzf data.tar.gz -C "${pkgdir}"
	# Fix directory structure differences
	cd "${pkgdir}"
	install -D -m644 "usr/local/bin/myoffice-standard-home-edition/Resources/UI/tt/LicenseAgreements.rcc" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	mkdir usr/bin 2> /dev/null; mv usr/local/bin/* usr/bin; rm -rf usr/local/bin
	rm -rf usr/local
	cd ..
}
