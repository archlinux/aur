# This file has been AUTO-GENERATED by crosspkg utility, which is part of TSPkg project (tssoftware.eu)
# Please do NOT edit by hand


set -e

pkgname='libnfd'
pkgdesc='Native file dialog library'
author='btzy'
type='library'
pkgver='1.0.0'
platforms=( 'all' )
options=( '!strip' )
pkgrel=1

arch=(  'any' )

depends=( 'gtk3' )
makedepends=( gcc make cmake )
source=( "git+https://github.com/btzy/nativefiledialog-extended.git" )


# Manually written
sha256sums=( "SKIP" )

prepare() {
    cd "${srcdir}"
#     sha256sum -c checksums.sha256
}

build() {
    cd "${srcdir}/nativefiledialog-extended"
    echo "pwd: $PWD"
    mkdir -p build
    cd build
    cmake -DBUILD_SHARED_LIBS=1 ..
    make -j "$(( $(cat /proc/cpuinfo | grep 'cpu cores' | awk 'END{print $4}') * 2 ))" nfd
#     if [ "$remote" == 1 ]; then
#         echo "srcdir: $srcdir"
#         echo "pkgname: $pkgname"
#         getpkg "$uniq" "$pkgname" "$srcdir"
#     fi
#     [ -f Makefile ] && make -j 4 || ninja
}
package() { 
#     mv "$srcdir"/* "$pkgdir/"
    targ="$pkgdir/usr/lib/"
    mkdir -p "$targ"
    mkdir -p "$pkgdir/usr/include/"
    mv "$(realpath $srcdir/nativefiledialog-extended/build/src/libnfd.so)" "$targ/libnfd.so"
    mv "$srcdir/nativefiledialog-extended/src/include"/* "$pkgdir/usr/include/"
}        



