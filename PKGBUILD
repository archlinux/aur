# Maintainer: Noah Jelen <noahtjelen@gmail.com>
# Generated by cargo on February 28, 2023 at 19:34:00
pkgname=music-lounge
pkgver=0.6.1
pkgrel=1
pkgdesc="Yet another music player"
arch=('i686' 'x86_64')
url="https://gitlab.com/aercloud-systems/music-lounge"
license=('GPL3')
depends=('ncurses' 'gcc-libs' 'glibc' 'glib2' 'gst-plugins-bad-libs' 'gst-plugins-base-libs' 'gstreamer' 'libffi' 'orc' 'libunwind' 'libelf' 'pcre' 'xz' 'zlib' 'zstd' 'bzip2')
makedepends=('cargo' 'gzip')
source=("https://gitlab.com/aercloud-systems/music-lounge/-/archive/$pkgver/music-lounge-$pkgver.zip")
md5sums=('SKIP')

build() {
    cd "music-lounge-$pkgver"
    cargo build --release
}

package() {
    cd "music-lounge-$pkgver"
    mkdir -p "$pkgdir/usr/share/mlounge/font"
    install -Dt "$pkgdir/usr/share/man/man1" man/mlounge.1
    install -Dt "$pkgdir/usr/share/man/man1" man/mlounged.1
    install -Dt "$pkgdir/usr/share/man/man1" man/mlounge-visual.1
    install -Dt "$pkgdir/usr/bin" -m755 target/release/mlounge
    install -Dt "$pkgdir/usr/bin" -m755 target/release/mlounged
    install -Dt "$pkgdir/usr/bin" -m755 target/release/mlounge-visual
    install -Dt "$pkgdir/usr/share/applications/" mlounge.desktop
    install -Dt "$pkgdir/usr/share/mlounge/" icon.png
    install -Dt "$pkgdir/usr/share/mlounge/" matrix.kwinrule
    install -Dt "$pkgdir/usr/share/mlounge/" wave.kwinrule
    install -Dt "$pkgdir/usr/share/mlounge/" info.kwinrule
    install -Dt "$pkgdir/usr/lib/systemd/user" mlounged.service
    install -Dt "$pkgdir/usr/share/mlounge/font" font/Monocraft.otf
    install -Dt "$pkgdir/usr/share/mlounge/font" "font/Monocraft License.txt"
}