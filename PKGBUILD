# PKGBUILD generated by pipman
# Python package author: Stefan Marsiske <s@ctrlc.hu>
# Maintainer: Hauke Rehfeld <aur.archlinux.org@haukerehfeld.de>
_name="pysodium"
pkgname="python-${_name}"
pkgver=0.7.14
_pkgsubdir="${_name}-${pkgver}"
pkgrel=1
pkgdesc="python libsodium wrapper"
arch=(any)
url="https://github.com/stef/pysodium"
license=(BSD)
makedepends=("python-build" "python-installer" "python-setuptools" "python-wheel")
depends=("libsodium" "python")
source=("https://files.pythonhosted.org/packages/source/${_name::1}/$_name/${_pkgsubdir}.tar.gz")
sha256sums=('df7de837a93b81afe6db1fa11f643f41ee2a59a0e481ce18e59420d7a5ea974d')

build() {
  cd "$_pkgsubdir"
  python -m build --wheel --no-isolation
}

package() {
  cd "$_pkgsubdir"
  python -m installer --destdir="$pkgdir" dist/*.whl

  install -Dm644 LICENSE.txt -t "$pkgdir/usr/share/licenses/$pkgname/"
}

check(){
  cd "$srcdir/$_pkgsubdir"
  python -m test.test_pysodium
}
