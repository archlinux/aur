# Maintainer : Wabuo <spam.wabuo@googlemail.com>
# Contributor:: Muflone http://www.muflone.com/contacts/english/

pkgname=thea-the-awakening-bin
_pkgname=thea-the-awakening
pkgver=1.RC51118.1
pkgrel=6
pkgdesc="A turn-based strategic survival game steeped in Slavic myth. -gratis unsuported linux build"
arch=('i686' 'x86_64')
url="http://steamcommunity.com/app/378720/discussions/0/490125737485986607"
license=('freeware')
source=(${_pkgname}.zip::"https://onedrive.live.com/download?resid=D09AAF078EFDC73D!2983&authkey=!AGxe3W4ByFCzWfs&ithint=file%2czip"
        "https://raw.githubusercontent.com/Wabuo/PKGBUILD/master/thea-the-awakening/thea-the-awakening.desktop"
        "https://raw.githubusercontent.com/Wabuo/PKGBUILD/master/thea-the-awakening/thea-the-awakening.desktop.sig")
validpgpkeys=('E50EF6D35253C390580747781D3F7F8594C766C9') # Wabuo

#The devolopers don't provide any checksums! Checksums generated by me!
sha256sums=('0556be387ea83460ff7b47b80c074bcfc66f915d31bac20c8f75144e39929a1c'
            'd613dcdbaf0dae16229ada565d065ea983dbbc63efac9aae1e5246561b2ead11'
            'SKIP')

install=${_pkgname}.install

package() {
  install -d "${pkgdir}/opt/games/${_pkgname}"
  install -d "${pkgdir}/usr/share/applications"
  install -d "${pkgdir}/usr/bin"

  arch=`uname -m`
  if [ $arch == i686 ];then
  	    install -m755 "${srcdir}/Thea.x86" "${pkgdir}/opt/games/${_pkgname}"
        ln -s "/opt/games/${_pkgname}/Thea.x86" "${pkgdir}/usr/bin/${_pkgname}"
  elif [ $arch == x86_64 ];then
  	    install -m755 "${srcdir}/Thea.x86_64" "${pkgdir}/opt/games/${_pkgname}"
        ln -s "/opt/games/${_pkgname}/Thea.x86_64" "${pkgdir}/usr/bin/${_pkgname}"
  fi

  install -m644 "${srcdir}/${_pkgname}.desktop" "${pkgdir}/usr/share/applications/${_pkgname}.desktop"

  cp -a "Thea_Data" "${pkgdir}/opt/games/${_pkgname}"
}
